<div class="w-100 h-100" style="height: calc(100vh) !important;overflow: auto;">
    <div class="d-flex flex-column align-items-center w-100 h-100 px-1" [ngClass]="{'justify-content-start': true}">
        <div class="mt-1 mb-3" [ngClass]="{'w-75': !isMobile || orientation==='landscape', 'w-100': isMobile && orientation!=='landscape'}">
            <ng-container *ngIf="channels.length>0 && streamForm">
                <form [formGroup]="streamForm">

                    <ng-select
                        class="mb-2"
                        [items]="countries"
                        (ngModelChange)="doFilterByCountry()"
                        formControlName="country"
                        [clearable]="false"
                        name="type"
                        bindValue="iso2"
                        bindLabel="name"
                        placeholder="Search a country">
                        <ng-template ng-label-tmp let-item="item">
                            <div class="d-flex align-items-center justify-content-start w-100">
                                <i *ngIf="item.iso2.length>0" [title]="getCountryName(item.iso2)" class="me-2 fi fi-{{item.iso2}}"></i>
                                {{item.name}}
                            </div>
                        </ng-template>
                        <ng-template ng-option-tmp let-item="item" let-index="index">
                            <div class="d-flex align-items-center justify-content-start w-100">
                                <i *ngIf="item.iso2.length>0" [title]="getCountryName(item.iso2)" class="me-2 fi fi-{{item.iso2}}"></i>
                                {{item.name}}
                            </div>
                        </ng-template>
                    </ng-select>

                    <ng-select
                        [items]="channelsFiltered"
                        (ngModelChange)="doUpdateStreamUrl($event)"
                        formControlName="channel"
                        name="type"
                        bindValue="name"
                        bindLabel="name"
                        placeholder="Search a channel">
                        <ng-template ng-label-tmp let-item="item">
                            <div class="d-flex align-items-center justify-content-between w-100">
                                <div class="d-flex align-items-center">
                                    <img [src]="item.logo" class="logo me-2">
                                    {{item.name}}
                                </div>
                                <i *ngIf="item.country?.length>0" [title]="getCountryName(item.country)" class="ms-auto fi fi-{{item.country}}"></i>
                            </div>
                        </ng-template>
                        <ng-template ng-option-tmp let-item="item" let-index="index">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center">
                                    <img [src]="item.logo" class="logo me-2">
                                    {{item.name}}
                                </div>
                                <div>
                                    <small class="me-2 country_name">{{item.country}}</small>
                                    <i *ngIf="item.country?.length>0" [title]="getCountryName(item.country)" class="ms-auto fi fi-{{item.country}}"></i>
                                </div>
                            </div>
                        </ng-template>
                    </ng-select>
                    
                </form>
            </ng-container>
        </div>
       
        <div class="d-flex justify-content-between align-items-top w-100" [ngClass]="{'w-75': !isMobile || orientation==='landscape', 'w-100': isMobile && orientation!=='landscape'}">
            
            <div class="d-flex flex-column justify-content-between w-10">
                <ng-container *ngFor="let channelId of history">
                    <button class="btn btn-sm" (click)="selectChannelFromHistory(channelId)">
                        <img [title]="getChannel(channelId)?.name" class="me-2 w-100 history_img" [src]="getChannel(channelId)?.logo">
                    </button>
                </ng-container>
            </div>
            <div class="d-flex flex-column justify-content-start align-items-top w-90">
                <ng-container *ngIf="streamUrl">

                    <ng-container *ngIf="isWindows || isAndroid || isMac">
                        <vg-player>
                            <video #myMedia
                                   [vgHls]="streamUrl"
                                   [vgHlsHeaders]="headers"
                                   (onGetBitrates)="hlsBitrates = $event"
                                   id="my-video"
                                   type="video/mp4"
                                   preload="metadata"
                                   [muted]="true"
                                   autoplay
                                   controls>
                            </video>
                        </vg-player>
                    </ng-container>
    
                    <ng-container *ngIf="isIOS">
                        <vg-player>
                            <video #myMedia
                                   [vgHls]="streamUrl"
                                   [vgHlsHeaders]="headers"
                                   (onGetBitrates)="hlsBitrates = $event"
                                   id="my-video"
                                   type="video/mp4"
                                   preload="metadata"
                                   [muted]="true"
                                   autoplay
                                   controls>
                            </video>
                        </vg-player>
                        
                    </ng-container>
                    
                </ng-container>
            </div>
            
        </div>
    </div>
</div>